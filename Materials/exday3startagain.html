
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Exercises Day 3 TA &#8212; Open Ephys EEA Course Materials December 2021 0.0.0 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">Open Ephys EEA Course Materials December 2021</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="kitlist.html">
  NeuroKit Contents
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="eeadocsindex.html">
  OE Cajal Course December 2021
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="disclaimer_terms_conditions.html">
  Terms and Conditions
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="license.html">
  Licensing
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#differential-signals">
   Differential Signals
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reference-electrode">
     Reference electrode
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#emg-circuit">
     EMG circuit
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#electrodes">
   Electrodes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#instrumentation-amplifier">
   Instrumentation Amplifier
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   EMG circuit
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="exercises-day-3-ta">
<span id="refeday3ta"></span><h1>Exercises Day 3 TA<a class="headerlink" href="#exercises-day-3-ta" title="Permalink to this headline">¶</a></h1>
<section id="differential-signals">
<h2>Differential Signals<a class="headerlink" href="#differential-signals" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
<ol class="upperalpha simple">
<li><p>Measure across your fingers with the oscilloscope 1x probe. How big is the amplitude of this signal? Compare this to the size of a spike, around 100 µV.  Could you see a spike on top of that noise?</p></li>
</ol>
<p>So far, we have only considered the signal coming into our recording electrode, relative to ground. We will now add a reference electrode in the simulator.</p>
<p>You can think of the small square waves as spikes you are trying to detect, and the sine wave (that both reference and your measurement electrode share) as background- maybe slow EEG signals or 50Hz noise, which is likely to be present at both electrodes.</p>
<p>Step-by-step, we are going to build our ‘goal’ circuit has the following properties:</p>
<ul class="simple">
<li><p>Input from the measurement electrode (spikes)</p></li>
<li><p>Input from the reference electrode (common noise)</p></li>
<li><p>Output: Reference subtracted from measurement, multiplied by gain</p></li>
<li><p>Does not draw current from cells</p></li>
</ul>
<a class="reference external image-reference" href="https://tinyurl.com/y5pw86ox"><img alt="../_images/eea_fig-44.png" class="align-center" src="../_images/eea_fig-44.png" /></a>
<p>Reference</p>
<section id="reference-electrode">
<h3>Reference electrode<a class="headerlink" href="#reference-electrode" title="Permalink to this headline">¶</a></h3>
<ol class="upperalpha simple">
<li><p>Connect the reference and spike signal directly to the op-amp in open-loop configuration to subtract the reference. Connect the output of the amplifier to the PC. Run the simulation. What (in V) is the amplifier giving as output?</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://tinyurl.com/yemp5rve">https://tinyurl.com/yemp5rve</a></p>
</div>
<p>B. Try adding a negative feedback connection to stop the amplifier from saturating.
Why does this not work unless you include a resistor?</p>
<p>C. Using two resistors on each side of the ‘-’ input, make a voltage divider.
What is the output now? Can you change the gain?</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://tinyurl.com/yzz5ht4f">https://tinyurl.com/yzz5ht4f</a></p>
</div>
<p>D. We’re still not outputting our spikes. What went wrong?
Try to figure this out but don’t get stuck forever.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://tinyurl.com/yg63xmm5">https://tinyurl.com/yg63xmm5</a>
put ‘+’ in middle of voltage divider to ground. yay this is a diff amplifier!</p>
</div>
<p>So, can we use this shiny new differential amplifier to record neural signals? We worked so hard to avoid drawing current from our frail electrode signal, and now we’re telling you to put big voltage dividers right at the inputs of our op-amp? That seems bad. Also, as we’ve just simulated, often op-amps do not have equal input impedances across + and -! This is similar to the example form earlier where we modelled a long wire, except that now you have two wires of different lengths in front of your inputs. If you’ve every measured electrode impedance, how much variation was there between electrodes? To get this differential amplifier to work, each electrode and resistor would have to be identical, which is, in practice, impossible.</p>
<ol class="upperalpha simple" start="5">
<li><p>How can we preserve the nice differential properties of the amplifier we just built, but still have our signals go straight into like a ‘+’ terminal on an op-amp to avoid impedance imbalances, and to avoid drawing current through voltage dividers? Extra hint: op-amps are cheap.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Solution: use 3 op-amps. 2 act as buffers for the reference and measurement electrode, the third amplifies the difference between them. <a class="reference external" href="https://tinyurl.com/ygzm5pg4">https://tinyurl.com/ygzm5pg4</a></p>
</div>
</section>
<section id="emg-circuit">
<h3>EMG circuit<a class="headerlink" href="#emg-circuit" title="Permalink to this headline">¶</a></h3>
<p>Now we are going to build an EMG circuit! We’ll use the electrodes in your kit, an instrumentation amplifier as our headstage, and the Teensy will be our acquisition board. We now have all the steps of the acquisition in place to simulate a lab experiment.</p>
<img alt="../_images/eea_fig-5.png" class="align-center" src="../_images/eea_fig-5.png" />
</section>
</section>
<section id="electrodes">
<h2>Electrodes<a class="headerlink" href="#electrodes" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Your kit contains surface electrodes that we will use for EMG. These measurements involve attaching yourself to a circuit, so follow these rules to be safe:</p>
<ol class="upperalpha simple">
<li><p>Do not use anything other than the recommended batteries to power your circuit. Do not connect your circuit to mains supply for power, ground, anything.</p></li>
<li><p>Only connect the EMG electrodes to one arm. Don’t attach them to both arms. This is to avoid any current travelling across your heart.</p></li>
<li><p>If you are using a laptop, disconnect your laptop charger &amp; run from battery while the electrodes are attached to you. This is to prevent any surges from mains supply from backpropagating through your laptop, to you.</p></li>
</ol>
</div>
<p>The electrodes clip onto the cable with three wires. We’ll be using an audio-to-breadboard jack to get the signal from the electrodes into the breadboard.</p>
</section>
<section id="instrumentation-amplifier">
<h2>Instrumentation Amplifier<a class="headerlink" href="#instrumentation-amplifier" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://www.analog.com/media/en/technical-documentation/data-sheets/AD622.pdf">This</a> is the datasheet for the instrumentation amplifier in your kit.</p>
<img alt="../_images/eea_fig-61.png" class="align-center" src="../_images/eea_fig-61.png" />
</section>
<section id="id1">
<h2>EMG circuit<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The disposable electrodes in the kit are single-use, so do not attach them until you are sure your circuit is working and that you have the correct position (see below).</p>
</div>
<p>First, we’ll wire up our electrodes to our instrumentation amp and read out the result with our oscilloscope. Later, we’ll add the Teensy.</p>
<ol class="arabic simple">
<li><p>Replicate the following circuit:</p></li>
</ol>
<img alt="../_images/eea_fig-62.png" class="align-center" src="../_images/eea_fig-62.png" />
<ul class="simple">
<li><p>Bypass capacitor = 104</p></li>
<li><p>Resistor: 220 Ohm</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p>Now click the surface electrodes onto the ends of the cable, and click the jack into the breadboard adaptor.</p></li>
</ol>
<ul class="simple">
<li><p>Black cable = ground electrode = Ring 1</p></li>
<li><p>Blue cable = - (reference) electrode  = Ring 2</p></li>
<li><p>Red cable = + electrode = Tip</p></li>
</ul>
<ol class="arabic simple" start="3">
<li><p>Attach your oscilloscope as shown:</p></li>
</ol>
<img alt="../_images/eea_fig-63.png" class="align-center" src="../_images/eea_fig-63.png" />
<p>If you tap the electrodes, you should see the trace of your PicoScope respond. If not, troubleshoot your circuit until you do.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Problems here are often:</p>
<ul class="simple">
<li><p>Forgetting to connect both grounds</p></li>
<li><p>Being offset by 1 position in breadboard. Get the group to help each other spotting small errors like that.</p></li>
</ul>
</div>
<p>3.      If your picoscope responds to tapping your electrodes, you are ready to measure EMG!
Place the measurement and reference electrode very close together, on the part of the forearm where you can feel your muscle when you tense it.  You should see a clear signal in the oscilloscope when you tense your muscles. Moving your arm will cause large motion artefacts (why?) so try to find a setup that gives you a consistent and clear signal.</p>
<ol class="arabic simple" start="4">
<li><p>The resistor across the instrumentation amplifier sets the gain of the amplifier. Change the gain of the amplifier by changing Rg. What happens when the value for Rg is very low?</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have a lot of noise on your recording, try:</p>
<ul class="simple">
<li><p>Disconnecting from 60/50Hz contaminated ground by using laptop battery</p></li>
<li><p>Try twisting or braiding the cables</p></li>
</ul>
</div>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2010-2021, Open Ephys, OEPS &amp; Contributors.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>